<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>Rock Paper Scissors</title>
        <link href="style.css" rel="stylesheet">
        <link rel="stylesheet"
          href="https://fonts.googleapis.com/css?family=Lobster">
    </head>
    <body>
        <button class="btn rock">Rock</button>
        <button class="btn paper">Paper</button>
        <button class="btn scissors">Scissors</button>

        <div id="container"></div>

        <button class="reset">Reset</button>
        
        <script>

            function computerPlay() {
                let move = Math.floor(Math.random()*3);
                
                if (move === 0)
                {
                    return 'rock';
                }
                else if (move === 1)
                {
                    return 'paper'
                }
                else
                {
                    return 'scissors'
                }
            }

            let playerWin = 0;
            let computerWin = 0;
            let result;

            let roundCount = 0;

            const container = document.querySelector('#container'); 

            const resultDiv = document.createElement('div');  
            const compDiv = document.createElement('div');
            const playerDiv = document.createElement('div');

            const final = document.createElement('div');

            const rock = document.querySelector('.rock');
            rock.addEventListener('click', () => {
                if (playerWin === 5 || computerWin === 5)
                {
                    return;
                }
                else
                {
                    playRound('rock', computerPlay());
                }
            });

            const paper = document.querySelector('.paper');
            paper.addEventListener('click', () => {
                if (playerWin === 5 || computerWin === 5)
                {
                    return;
                }
                else
                {
                    playRound('paper', computerPlay());
                }
            });

            const scissors = document.querySelector('.scissors');
            scissors.addEventListener('click', () => {
                if (playerWin === 5 || computerWin === 5)
                {
                    return;
                }
                else
                {
                    playRound('scissors', computerPlay());
                }
            });

            const btn = document.querySelector('button');

            const reset = document.querySelector('.reset');

            reset.addEventListener('click', () => {
                location.reload();
                return false;
            })

            function playRound(playerSelection, computerPlay)
            {

                switch(playerSelection) {
                    
                    case 'rock':
                        if (computerPlay === 'paper')
                        {
                            result = 'You lose, paper beats rock.';
                            ++computerWin;
                        }
                        else if (computerPlay === 'scissors')
                        {
                            result = 'You win, rock beats scissors.';
                            ++playerWin;
                        }
                        else
                        {
                            result = 'It\'s a tie.';
                        }
                        break;

                    case 'paper':
                        if (computerPlay === 'scissors')
                        {
                            result = 'You lose, scissors beats paper.';
                            ++computerWin;
                        }
                        else if (computerPlay === 'rock')
                        {
                            result = 'You win, paper beats rock.';
                            ++playerWin;
                        }
                        else
                        {
                            result = 'It\'s a tie.';
                        }
                        break;

                    case 'scissors':
                        if (computerPlay === 'rock')
                        {
                            result = 'You lose, rock beats scissors.';
                            ++computerWin;
                        }
                        else if (computerPlay === 'paper')
                        {
                            result = 'You win, scissors beats paper.';
                            ++playerWin;
                        }
                        else
                        {
                            result = 'It\'s a tie';
                        }
                        break;

                    default:
                            result = 'No contest, please enter a valid option.';
                            --i;
                            break;
                }
                ++roundCount;
                console.log(roundCount);
                resultDiv.textContent = result; 
                compDiv.textContent = `computer score: ${computerWin}`;
                playerDiv.textContent = `your score: ${playerWin}`;
                container.appendChild(resultDiv);
                container.appendChild(compDiv);
                container.appendChild(playerDiv);

                if(playerWin === 5 || computerWin === 5)
                {
                    if (playerWin > computerWin)
                    {
                        final.textContent = 'Final Result: You Win!';
                    }
                    else if (computerWin > playerWin)
                    {
                        final.textContent = 'Final Result: You Lose!';
                    }
                    else
                    {
                        final.textContent = 'Final Result: Tie';
                    }
                    container.appendChild(final);
                }
                return;
            }
        </script>
    </body>
</html>